#!/bin/bash
set -e # Exit on first error

echo "ğŸš€ Starting Pre-Flight Check..."

echo "------------------------------------------------"
echo "ğŸ¨ 1. Running Laravel Pint (Fixing Code Style)..."
./vendor/bin/sail bin pint

echo "------------------------------------------------"
echo "ğŸ§¹ 2. Running ESLint & Prettier (Frontend)..."
./vendor/bin/sail npm run lint:fix 2>/dev/null || echo "âš ï¸  Lint fix script missing, skipping auto-fix."

echo "------------------------------------------------"
echo "ğŸ” 3. Running PHPStan (Static Analysis)..."
./vendor/bin/sail bin phpstan analyse

echo "------------------------------------------------"
echo "âœ… 4. Running Tests (Pest)..."
./vendor/bin/sail test

echo "------------------------------------------------"
echo "ğŸ‰ ALL SYSTEMS GO. Ready to Commit."